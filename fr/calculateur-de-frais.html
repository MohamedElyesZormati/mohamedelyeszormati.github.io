<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Mohamed Elyes Zormati">
    <meta name="description" content="Je m'appelle Mohamed Elyes Zormati, je suis développeur web de Tunis, Tunisie.">
    <!-- FONT AWESOME CDN-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

    <!-- GOOGLE FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Bitcount+Single+Ink:wght@100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="css/poppins.css">
    <link rel="stylesheet" href="../css/cost-calculator.css">
    <script src="../js/mobile-menu.js" defer></script>
    <title>Calculateur de frais | Mohamed Elyes Zormati - Développeur Web</title>
</head>

<body>
    <!-- HEADER -->
    <header>

        <h1><a href="index.html">Mohamed Elyes Zormati</a></h1>

        <section class="hidden" id="mobile-menu">
            <div id="menu-open"><i class="fa-solid fa-bars"></i></div>
            <div id="menu-close"><i class="fa-solid fa-x"></i></div>
        </section>

        <nav id="main-nav">
            <ul>
                <li class="nav-list-item"><a href="index.html">Accueil</a></li>
                <li class="nav-list-item"><a href="a-propos.html">
                        À propos</a></li>
                <li class="nav-list-item"><a href="portfolio.html">
                        Portfolio</a></li>
                <li class="nav-list-item"><a href="contact.html">
                        Contact</a></li>

                <li class="nav-list-item lang-selector"><a href="../index.html"><img
                            src="../images/english_icon.png"></a></li>

                <li class="nav-list-item lang-selector selected-lang"><a href="index.html"><img
                            src="../images/french_icon.png"></a>
                </li>

            </ul>
        </nav>
    </header>

    <nav class="hidden" id="mobile-nav">
        <ul>
            <li class="nav-list-item"><a href="index.html">Accueil</a>
            </li>
            <li class="nav-list-item"><a href="a-propos.html">
                    À propos</a></li>
            <li class="nav-list-item"><a href="portfolio.html">
                    Portfolio</a></li>
            <li class="nav-list-item"><a href="contact.html">
                    Contact</a></li>
            <div id="language-selectors">
                <li class="nav-list-item lang-selector"><a href="../index.html"><img
                            src="../images/english_icon.png"></a></li>
                <li class="nav-list-item lang-selector selected-lang"><a href="index.html"><img
                            src="../images/french_icon.png"></a>
                </li>
            </div>

        </ul>
    </nav>

    <!-- MAIN SECTION -->
    <main>
        <!-- MAIN SECTION 1 -->
        <section id="main-section-1">
            <h2>Calculateur de frais</h2>


            <h3>Details :</h3>

            <ul>
                <li><i class="fa-solid fa-window-maximize"></i> Type de site web : <span class="selected-option"
                        id="website-type-selected"></span></li>

                <li><i class="fa-solid fa-file"></i> Pages Supplémentaires : <span class="selected-option"
                        id="additional-pages-selected"></span>
                </li>

                <li><i class="fa-solid fa-language"></i> Site multilingue : <span class="selected-option"
                        id="mulilingual-selected"></span></li>

                <li><i class="fa-brands fa-searchengin"></i> Référencement Naturel : <span class="selected-option"
                        id="seo-selected"></span></li>

                <li><i class="fa-solid fa-globe"></i> Nom de domaine : <span class="selected-option"
                        id="domain-name-selected"></span></li>

                <li><i class="fa-solid fa-server"></i> Hébergement : <span class="selected-option"
                        id="web-hosting-selected"></span></li>

                <li><i class="fa-solid fa-screwdriver-wrench"></i> Maintenance web : <span class="selected-option"
                        id="web-maintenance-selected"></span></li>
            </ul>

            <section class="fee-section">
                <p>Total des frais : <span id="price"></span> DT</p>
                <button id="reset-btn"><i class="fa-solid fa-trash"></i> Réinitialiser</button>
            </section>

        </section>

        <!-- MAIN SECTION 2 -->
        <section id="main-section-2">
            <form id="calculator-form">
                <h3>Type de site web</h3>
                <select id="website-type">
                    <option value="0" selected>Selectionnez votre type de site web</option>
                    <option value="500">Site vitrine 5-7 pages (500 DT)</option>
                    <option value="1000">Site e-commerce (1000 DT)</option>
                </select>

                <h3>Pages additionnelles</h3>
                <select id="additional-pages">
                    <option value="0" selected>Non</option>
                    <option value="100">1 page additionnelle (100DT)</option>
                    <option value="200">2 pages additionnelles (200DT)</option>
                    <option value="300">3 pages additionnelles (300DT)</option>
                    <option value="400">4 pages additionnelles (400 DT)</option>
                    <option value="500">5 pages additionnelles (500 DT)</option>
                    <option value="600">6 pages additionnelles (600 DT)</option>
                    <option value="700">7 pages additionnelles (700 DT)</option>
                    <option value="800">8 pages additionnelles (800 DT)</option>
                    <option value="900">9 pages additionnelles (900 DT)</option>
                    <option value="1000">10 pages additionnelles (1000 DT)</option>
                </select>


                <h3>Site multinlingue</h3>
                <select id="multilingual-website">
                    <option value="0" selected>Non</option>
                    <option value="50">1 langue additionnelle (50 DT)</option>
                    <option value="100">2 langues additionnelles (100 DT)</option>
                    <option value="150">3 langues additionnelles (150 DT)</option>
                    <option value="200">4 langues additionnelles (200 DT)</option>
                    <option value="250">5 langues additionnelles (250 DT)</option>
                </select>

                <h3>Référencement Naturel (SEO)</h3>
                <select id="seo">
                    <option value="0" selected>Non</option>
                    <option value="100">Référencement de base (100 DT)</option>
                </select>

                <h3>Nom de domaine</h3>
                <select id="domain-name">
                    <option value="0" selected>Non</option>
                    <option value="106">Nom de domaine .com (106 DT / an)</option>
                    <option value="106">Nom de domaine .net (106 DT / an)</option>
                    <option value="50">Nom de domaine .tn (50 DT / an)</option>
                    <option value="50">Nom de domaine com.tn (50 DT / an)</option>
                </select>

                <h3>Hébergement web</h3>
                <select id="web-hosting">
                    <option value="0" selected>Non</option>
                    <option value="200">Hébergement mutualisé (200 DT / an)</option>
                </select>

                <h3>Maintenance Web</h3>
                <select id="web-maintenance">
                    <option value="0" selected>Non</option>
                    <option value="300">1 Mois (300 DT)</option>
                    <option value="900">3 Mois (900 DT)</option>
                    <option value="1800">6 Mois (1800 DT)</option>
                    <option value="3600">12 Mois (3600 DT)</option>
                </select>
            </form>
        </section>
    </main>

    <!-- FOOTER SECTION -->
    <footer>
        <section id="footer-1">
            <p>&copy;2025 Mohamed Elyes Zormati</p>
        </section>

        <section id="footer-2">
            <section id="social-icons">
                <ul>
                    <li><a class="social-icon" href="mailto:mohamed.elyes.zormati@outlook.com" aria-label="email"><i
                                class="fa-solid fa-envelope"></i></a></li>
                    <li><a class="social-icon" href="https://wa.me/21693039536" aria-label="WhatsApp" target="_blank"><i
                                class="fa-brands fa-whatsapp"></i></a></li>
                </ul>
            </section>
        </section>
    </footer>

    <script>
        // defensive function to get element and log missing elements
        function $id(id) {
            const el = document.getElementById(id);
            if (!el) console.error('Element introuvable:', id);
            return el;
        }

        (function initCalculator() {
            // get elements (will log missing ones if any)
            const websiteType = $id('website-type');
            const additionalPages = $id('additional-pages');
            const multilingual = $id('multilingual-website');
            const seo = $id('seo');
            const domainName = $id('domain-name');
            const webHosting = $id('web-hosting');
            const webMaintenance = $id('web-maintenance');

            const priceDisplay = $id('price');
            const websiteTypeSelected = $id('website-type-selected');
            const additionalPagesSelected = $id('additional-pages-selected');
            const multilingualSelected = $id('mulilingual-selected');
            const seoSelected = $id('seo-selected');
            const domainNameSelected = $id('domain-name-selected');
            const webHostingSelected = $id('web-hosting-selected');
            const webMaintenanceSelected = $id('web-maintenance-selected');
            const resetBtn = $id('reset-btn');

            // fail early if essential elements missing
            if (!websiteType || !priceDisplay || !resetBtn) {
                console.error('Éléments essentiels manquants — le script ne peut pas continuer.');
                return;
            }

            // safe parsing: Number(...) || 0 prevents NaN
            function parseSafe(selectEl) {
                if (!selectEl) return 0;
                const n = Number(selectEl.value);
                return Number.isFinite(n) ? n : 0;
            }

            function updateSelectedText(selectEl, targetEl) {
                if (!selectEl || !targetEl) return;
                targetEl.textContent = selectEl.options[selectEl.selectedIndex]?.text || '';
            }

            function formatPrice(n) {
                // format with space as thousand separator for fr-FR
                return n.toLocaleString('fr-FR');
            }

            function calculateTotal() {
                const total =
                    parseSafe(websiteType) +
                    parseSafe(additionalPages) +
                    parseSafe(multilingual) +
                    parseSafe(seo) +
                    parseSafe(domainName) +
                    parseSafe(webHosting) +
                    parseSafe(webMaintenance);

                priceDisplay.textContent = formatPrice(total);

                // update summary lines
                updateSelectedText(websiteType, websiteTypeSelected);
                updateSelectedText(additionalPages, additionalPagesSelected);
                updateSelectedText(multilingual, multilingualSelected);
                updateSelectedText(seo, seoSelected);
                updateSelectedText(domainName, domainNameSelected);
                updateSelectedText(webHosting, webHostingSelected);
                updateSelectedText(webMaintenance, webMaintenanceSelected);
            }

            // attach listeners (guard for missing selects)
            [websiteType, additionalPages, multilingual, seo, domainName, webHosting, webMaintenance]
                .forEach(select => {
                    if (select) select.addEventListener('change', calculateTotal);
                });

            // reset function: restore selects and recalc
            function resetCalculator() {
                [websiteType, additionalPages, multilingual, seo, domainName, webHosting, webMaintenance]
                    .forEach(select => {
                        if (select) select.selectedIndex = 0;
                    });

                calculateTotal();
            }

            resetBtn.addEventListener('click', resetCalculator);

            // initial calculation
            calculateTotal();

            // expose for debugging in console
            window._calc = { calculateTotal, resetCalculator };
            console.info('Calculateur initialisé — utilisez window._calc.calculateTotal() ou resetCalculator() pour tester.');
        })();
    </script>
</body>

</html>